# TOD社区小程序

> 基于 Taro + React + Express + Supabase 的多端社区管理平台

[![License](https://img.shields.io/badge/license-GPL2.0-blue.svg)](LICENSE)
[![Node](https://img.shields.io/badge/node-%3E%3D18.0.0-brightgreen.svg)](https://nodejs.org)
[![Taro](https://img.shields.io/badge/taro-3.6.20-blue.svg)](https://taro.zone)

## 📖 项目简介

TOD社区小程序是一个面向社区居民的综合服务平台，致力于通过数字化手段提升社区管理效率和居民生活品质。

### 核心功能

- 📢 **社区公告** - 重要通知及时触达
- 🏪 **商家黄页** - 周边商家一键查找
- 🤝 **邻里互助** - 社区交流互帮互助
- 🔧 **在线报修** - 物业报修便捷高效
- 🛒 **接龙团购** - 社区团购省钱省心
- 🏋️ **设施预约** - 公共设施在线预约
- 📊 **投票问卷** - 社区决策民主参与
- 💰 **捐赠公示** - 财务透明公开公正

## 🚀 技术栈

### 前端技术
- **多端框架**: Taro 4.x（支持微信小程序、小红书小程序、H5）
- **UI组件库**: Taroify（基于Vant的Taro组件库）
- **开发框架**: React 19 + TypeScript
- **状态管理**: Zustand
- **样式方案**: SCSS
- **HTTP请求**: Taro.request 封装

### 后端技术
- **运行时**: Node.js 22+ LTS
- **Web框架**: Express 5.x
- **数据库**: Supabase（PostgreSQL + 实时订阅 + 认证）
- **ORM**: Supabase Client SDK
- **认证授权**: JWT + Supabase Auth
- **文件存储**: Supabase Storage
- **日志管理**: Winston

## 📦 快速开始

### 前置要求

- Node.js 22.x 或更高版本
- npm 10.x 或更高版本
- 微信开发者工具（最新稳定版）
- Supabase 账号（免费）

### 一键安装

```bash
# 克隆项目
git clone https://github.com/PbEeNiG/star-vast-village.git
cd star-vast-village

# 运行初始化脚本
./scripts/setup.sh
```

### 手动安装

#### 1. 后端项目

```bash
cd backend
npm install
npm run dev          # 启动开发服务器
```

## 文档导航

- 📖 [技术架构文档](docs/TECH_ARCHITECTURE.md) - 详细的技术选型和架构设计
- 🗄️ [数据库设计文档](docs/DATABASE_SCHEMA.md) - 完整的数据库表结构设计
- 🚀 [部署指南](docs/DEPLOYMENT.md) - 生产环境部署步骤
- 📝 [开发规范](docs/DEVELOPMENT.md) - 代码规范和最佳实践
- ⚡ [快速启动指南](docs/QUICK_START.md) - 15 分钟快速搭建开发环境

---

## 一、 核心原则与定位

1.  **服务对象**：小区内的**住户**、**商家**，以及**物业/社区志愿者**（作为管理者）。
2.  **核心价值**：提供一个**信息透明**、**服务高效**、**邻里互助**的数字化平台。
3.  **运营原则**：
    *   **MVP优先**：先用最小功能闭环验证需求，快速上线，再迭代。
    *   **数据安全**：严格遵守隐私法规，仅收集必要信息，用户数据是红线。
    *   **财务透明**：所有捐赠和支出（服务器、域名等）必须公开，建立信任。

## 二、 实践路径：三步走战略

### 第一步：MVP 启动期 (1-2个月)

此阶段的目标是**快速上线核心功能，验证社区的接受度和需求强度**。

*   **核心功能**：
    1.  **住户认证**：建立社区信任的基石。住户需提供楼栋门牌号，由物业或志愿者管理员审核。
    2.  **社区公告**：物业或管理员发布官方通知。
    3.  **商家黄页**：收录小区周边商家信息，仅提供信息，不做线上交易。
    4.  **邻里互助/失物招领**：一个简单的BBS板块。
    5.  **捐赠与公示**：设置简单的捐赠入口，并手动更新财务公开页面。



### 第二步：功能拓展期 (3-6个月)

根据用户反馈，增加提升便利性的功能。

*   **新增功能**：
    1.  **在线报修**：住户可在线提交报修工单（文字+图片），物业接单并更新处理状态。
    2.  **公共设施预约**：如小区活动室、篮球场等。
    3.  **投票/问卷**：用于社区公共事务的意见征集。
    4.  **智能订阅通知**：利用小程序订阅消息，在关键事件时发送提醒。


### 第三步：生态建设与长期运营期 (6个月以后)

重点转向**社区文化建设和可持续运营**。

*   **运营重点**：
    1.  **志愿者体系**：招募热心业主成为内容审核员、活动组织者。
    2.  **社区活动**：线上发起，线下组织，如跳蚤市场、兴趣小组等。
    3.  **财务自动化**：将捐赠和支出通过云函数自动记录到“财务公开”数据库。
    4.  **开源协作**：可以将项目在 **GitHub** 上开源，吸引技术爱好者参与贡献。

## 三、 技术与合规方案要点

*   **数据模型 (示例)**：
    *   `users` (用户表): openid, 认证状态, 楼栋单元信息, 角色
    *   `posts` (信息发布表): 类型, 内容, 图片, 发布者, 状态
    *   `merchants` (商家表): 名称, 分类, 联系方式, 地址
    *   `donations` (捐赠表): 金额, 捐赠时间 (为保护隐私，不记名或用昵称)
    *   `ledgers` (收支账本): 类型(收入/支出), 金额, 事由, 日期

*   **合规与风控**：
    *   **隐私政策**：上线前必须配置《用户隐私协议》。
    *   **内容安全**：接入微信的内容安全接口，过滤违规内容。
    *   **捐赠定性**：明确声明“**自愿捐赠，用于服务器及运营开销，无任何商业回报**”。

## 四、 成本估算

*   **开发成本**：若自行开发，人力成本可控。
*   **服务器成本**：初期使用微信云开发，**约等于0元**。中后期每月可能产生几十到一百元费用。
*   **其他成本**：小程序认证费每年300元.
